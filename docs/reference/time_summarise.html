<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Summarise data from a line list to a time-series of counts. — time_summarise • growthrates</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Summarise data from a line list to a time-series of counts. — time_summarise"><meta property="og:description" content="This principally is designed to take a record of single events and produce a
summary time-series count of events by group, class and date. The default
behaviour is to guess the cadence of the input data and
summarise the event line list to a (set of) regular time-series counts for use
in incidence and growth rate estimates."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">growthrates</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/covid-timeseries.html">England COVID-19 cases</a>
    </li>
    <li>
      <a href="../articles/estimators-example.html">Simulation tests for growth rate estimators</a>
    </li>
    <li>
      <a href="../articles/incidence-trends.html">Population comparisons and incidence</a>
    </li>
    <li>
      <a href="../articles/time-periods.html">Data wrangling and working with `growthrates`</a>
    </li>
    <li>
      <a href="../articles/variant-proportions.html">Multinomial proportions models for genomic variants</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/bristol-vaccine-centre/growthrates/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Summarise data from a line list to a time-series of counts.</h1>
    <small class="dont-index">Source: <a href="https://github.com/bristol-vaccine-centre/growthrates/blob/HEAD/R/time-summarise.R" class="external-link"><code>R/time-summarise.R</code></a></small>
    <div class="hidden name"><code>time_summarise.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This principally is designed to take a record of single events and produce a
summary time-series count of events by group, class and date. The default
behaviour is to guess the cadence of the input data and
summarise the event line list to a (set of) regular time-series counts for use
in incidence and growth rate estimates.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">time_summarise</span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">i_dated</span>,</span>
<span>  <span class="va">unit</span>,</span>
<span>  anchor <span class="op">=</span> <span class="st">"start"</span>,</span>
<span>  rectangular <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>df</dt>
<dd><p>a line list of data you want to summarise, optionally grouped.
If this is grouped then each group is treated independently. The remaining
columns must contain a <code>date</code> column and may contain a <code>class</code> column. If a
<code>count</code> column is present the counts will be summed, otherwise each
individual row will be counted as a single event (as a linelist)</p></dd>


<dt>unit</dt>
<dd><p>a period e.g. "1 week"</p></dd>


<dt>anchor</dt>
<dd><p>one of a date, "start" or "end" or a weekday name e.g. "mon"
this will always be one of the start of the time periods we are cutting
into</p></dd>


<dt>rectangular</dt>
<dd><p>should the resulting time series be the same length for
all groups. This is only the case if you can be sure that your data is complete
for all subgroups, otherwise missing data will be treated as zero counts. This
is important if leading and trailing missing data in one subgroup can be due
to a reporting delay in that subgroup, in which case a rectangular time series
will erroneously fill in zero counts for this missing data.</p></dd>


<dt>...</dt>
<dd><p>a spec for a dplyr::summary(...) - optional, and if not provided a
<code>count = dplyr::n()</code> or a <code>count = sum(count)</code> is performed.</p></dd>


<dt>.fill</dt>
<dd><p>a list similar to tidyr::complete for values to fill
variables with</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The output depends on whether or not the input was grouped and
had a <code>class</code> column. The most detailed output will be:</p>


<p>A dataframe containing the following columns:</p><ul><li><p>denom (positive_integer) - Total test counts associated with the specified timeframe</p></li>
<li><p>count (positive_integer) - Positive case counts associated with the specified timeframe</p></li>
<li><p>time (as.time_period + group_unique) - A (usually complete) set of singular observations per unit time as a <code>time_period</code></p></li>
</ul><p>No mandatory groupings.</p>


<p>No default value.</p>


<p>or a more minimal output if the input is only a plain list of dated events:</p>


<p>A dataframe containing the following columns:</p><ul><li><p>count (positive_integer) - Positive case counts associated with the specified timeframe</p></li>
<li><p>time (as.time_period + group_unique) - A (usually complete) set of singular observations per unit time as a <code>time_period</code></p></li>
</ul><p>No mandatory groupings.</p>


<p>No default value.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>If the data is given with a <code>class</code> column the time series are interpreted as
having a denominator, consisting of all the different classes within a time period.
This may be subtypes (e.g. variants, serotypes) or markers for test positivity.
In either case the resulting time series will have counts for all classes and
denominators for the combination.</p>
<p>There is flexibility for other kinds of summarisation if the raw data is not
count based (e.g. means of continuous variables) but in this case a the <code>slider</code>
package is usually going to be better, as time summarise will only look at non
overlapping time periods with fixed lengths.</p>
<p>There is another use case where an existing  timeseries on a particular
frequency is aggregated to another less frequent basis (e.g. moving from a
daily timeseries to a weekly one). In this case the input will contain a
<code>count</code> column. In this mode no checks are made that the more frequent events
are all present before summarisation so the result may include different numbers
of input periods (e.g. going from weeks to months may be 4 or 5 weeks in each
month)</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Robert Challen.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

