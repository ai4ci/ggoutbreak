<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Set or reset the default origin and unit for time periods — set_defaults • ggoutbreak</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Set or reset the default origin and unit for time periods — set_defaults"><meta name="description" content="This function is generally not needed, and will be called automatically
when the first date conversion is performed. If no other information is
given then the default origin will be decided by the start of the first use of the
time_period class in a session. This helps to keep defaults consistent
during a single run, if they are not specified."><meta property="og:description" content="This function is generally not needed, and will be called automatically
when the first date conversion is performed. If no other information is
given then the default origin will be decided by the start of the first use of the
time_period class in a session. This helps to keep defaults consistent
during a single run, if they are not specified."><meta property="og:image" content="https://ai4ci.github.io/ggoutbreak/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggoutbreak</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ggoutbreak.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/covid-timeseries.html">England COVID-19 cases</a></li>
    <li><a class="dropdown-item" href="../articles/estimators-example.html">Simulation tests for growth rate estimators</a></li>
    <li><a class="dropdown-item" href="../articles/incidence-trends.html">Population comparisons and incidence</a></li>
    <li><a class="dropdown-item" href="../articles/infectivity-profile-discretisation.html">Infectivity profile discretisation</a></li>
    <li><a class="dropdown-item" href="../articles/right-censoring.html">Estimating the reproduction number from right censored data</a></li>
    <li><a class="dropdown-item" href="../articles/rt-from-incidence.html">Estimating the reproduction number from modelled incidence</a></li>
    <li><a class="dropdown-item" href="../articles/sampling-serial-interval.html">Sampling the infectivity profile from published serial interval estimates</a></li>
    <li><a class="dropdown-item" href="../articles/simulation-test-models.html">Simulations and test harnesses</a></li>
    <li><a class="dropdown-item" href="../articles/time-periods.html">Data wrangling and working with `ggoutbreak`</a></li>
    <li><a class="dropdown-item" href="../articles/variant-proportions.html">Multinomial proportions models for genomic variants</a></li>
    <li><a class="dropdown-item" href="../articles/weekly-incidence.html">Estimating the reproduction number from weekly data</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ai4ci/ggoutbreak/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Set or reset the default origin and unit for time periods</h1>
      <small class="dont-index">Source: <a href="https://github.com/ai4ci/ggoutbreak/blob/HEAD/R/periodic-times.R" class="external-link"><code>R/periodic-times.R</code></a></small>
      <div class="d-none name"><code>set_defaults.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function is generally not needed, and will be called automatically
when the first date conversion is performed. If no other information is
given then the default origin will be decided by the start of the first use of the
<code>time_period</code> class in a session. This helps to keep defaults consistent
during a single run, if they are not specified.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">set_defaults</span><span class="op">(</span><span class="va">start_date</span>, <span class="va">unit</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">with_defaults</span><span class="op">(</span><span class="va">start_date</span>, <span class="va">unit</span>, <span class="va">expr</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">set_default_start</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">set_default_unit</span><span class="op">(</span><span class="va">unit</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-start-date">start_date<a class="anchor" aria-label="anchor" href="#arg-start-date"></a></dt>
<dd><p>the zero time date as something that can be coerced to a
date. If the <code>x</code> input is already a <code>time_period</code> and this is different to its
<code>start_date</code> then <code>x</code> will be recalibrated to use the new start date.</p></dd>


<dt id="arg-unit">unit<a class="anchor" aria-label="anchor" href="#arg-unit"></a></dt>
<dd><p>the length of one unit of time. This will be either a integer
number of days, or a specification such as "1 week", or another <code>time_period</code>.
If <code>x</code> is a <code>time_period</code>, and the unit is different to that of <code>x</code>
this will return a rescaled <code>time_period</code> using the new units.</p></dd>


<dt id="arg-expr">expr<a class="anchor" aria-label="anchor" href="#arg-expr"></a></dt>
<dd><p>an expression to evaluate with the defaults set to the provided
values.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>depending on the methods the original default start date / the
original default unit, a list of both or the result of evaluating the
expression <code>expr</code></p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>with_defaults()</code>: Set defaults temporarily and execute expression</p></li>
<li><p><code>set_default_unit()</code>: Set the default unit only</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># set default origin and cadence:</span></span></span>
<span class="r-in"><span><span class="va">old</span> <span class="op">=</span> <span class="fu">set_defaults</span><span class="op">(</span><span class="st">"2025-01-01"</span>, <span class="st">"1 week"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># this sets the default for interpreting underqualified time_periods:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="as.time_period.html">as.time_period</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> time unit: week, origin: 2025-01-01 (a Wednesday)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2 3 4 5 6 7 8 9 10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The default can always be overridden on a case by case basis:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="as.time_period.html">as.time_period</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, unit<span class="op">=</span><span class="st">"1 day"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> time unit: day, origin: 2025-01-01 (a Wednesday)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2 3 4 5 6 7 8 9 10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># or for a whole expression:</span></span></span>
<span class="r-in"><span><span class="fu">with_defaults</span><span class="op">(</span><span class="st">"2020-01-01"</span>, <span class="st">"1 day"</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="as.time_period.html">as.time_period</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> time unit: day, origin: 2020-01-01 (a Wednesday)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2 3 4 5 6 7 8 9 10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># components can be changed individually, firstly origin:</span></span></span>
<span class="r-in"><span><span class="fu">set_default_start</span><span class="op">(</span><span class="st">"2025-01-01"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2025-01-01"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="as.time_period.html">as.time_period</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> time unit: week, origin: 2025-01-01 (a Wednesday)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2 3 4 5 6 7 8 9 10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># now cadence:</span></span></span>
<span class="r-in"><span><span class="fu">set_default_unit</span><span class="op">(</span><span class="st">"1 day"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "7d 0H 0M 0S"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="as.time_period.html">as.time_period</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> time unit: day, origin: 2025-01-01 (a Wednesday)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2 3 4 5 6 7 8 9 10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># clear the values:</span></span></span>
<span class="r-in"><span><span class="fu">set_defaults</span><span class="op">(</span><span class="cn">NULL</span>,<span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A sufficiently qualified call will set the defaults:</span></span></span>
<span class="r-in"><span><span class="va">defined</span> <span class="op">=</span> <span class="fu"><a href="as.time_period.html">as.time_period</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span><span class="op">+</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span><span class="op">*</span><span class="fl">7</span>, anchor<span class="op">=</span><span class="st">"start"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No `unit` specified. Inferring default from input: week (N.B. use `set_default_unit(...)` to change) </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> (N.B. this message will only be displayed once.)</span>
<span class="r-in"><span><span class="va">inherit</span> <span class="op">=</span> <span class="fu"><a href="as.time_period.html">as.time_period</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">defined</span> <span class="op">==</span> <span class="va">inherit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># restoring the original values (which might be null)</span></span></span>
<span class="r-in"><span><span class="fu">set_defaults</span><span class="op">(</span><span class="va">old</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Challen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

